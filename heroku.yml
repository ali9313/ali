build:
  docker:
    web:
      dockerfile: Dockerfile  # تأكد من أن لديك ملف Dockerfile صالح

run:
  web: python main.py  # تشغيل التطبيق الخاص بالـ web
  worker: python main.py  # تشغيل عملية الـ worker

setup:
  # إعداد المتغيرات البيئية وإنشاء قاعدة البيانات
  - run:
      name: Create PostgreSQL Database
      command: |
        heroku pg:backups:capture --app $HEROKU_APP_NAME
        heroku addons:create heroku-postgresql:hobby-dev --app $HEROKU_APP_NAME
        heroku config:set DATABASE_URL=$(heroku config:get DATABASE_URL --app $HEROKU_APP_NAME) --app $HEROKU_APP_NAME
